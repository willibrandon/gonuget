# Implementation Plan: v0.1.0 Release Preparation

**Branch**: `005-v0-1-0-release` | **Date**: 2025-11-04 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/005-v0-1-0-release/spec.md`

**Note**: This plan was generated by `/speckit.plan` command.

## Summary

Prepare gonuget for its first official v0.1.0 release by:
1. Generating CHANGELOG.md from git history using custom shell script with conventional commit parsing
2. Updating CI/CD pipeline to 2025 best practices with GitHub Actions and goreleaser for multi-platform binary builds
3. Implementing semantic versioning infrastructure with version command and -ldflags embedding
4. Creating release execution checklist for repeatable release process

**Technical Approach**: Custom shell script for CHANGELOG generation, goreleaser for cross-platform builds (5 architectures), GitHub Actions workflows for CI/CD, Go -ldflags for version embedding.

## Technical Context

**Language/Version**: Go 1.23+ (latest stable as of 2025), bash shell scripting
**Primary Dependencies**:
- goreleaser (release automation)
- GitHub Actions (CI/CD platform)
- git CLI (changelog generation)
- golangci-lint (existing, for linting)
- Go standard library for version command

**Storage**: File system (CHANGELOG.md, .goreleaser.yml, version.go, GitHub Actions workflows)
**Testing**: Existing gonuget test suite (`make test`, `make test-interop`), manual checklist validation
**Target Platform**: GitHub Actions runners (Linux, macOS, Windows), release binaries for linux/amd64, linux/arm64, darwin/amd64, darwin/arm64, windows/amd64
**Project Type**: Single Go project with CLI (existing gonuget structure)
**Performance Goals**: CI workflow <15 minutes, changelog generation <5 seconds
**Constraints**:
- All 5 target platforms must build successfully (any failure fails entire release)
- CHANGELOG must include all commits from initial commit to v0.1.0
- Version info must be embedded at build time (no source modification)
- Keep a Changelog format compliance required

**Scale/Scope**: ~200 commits in git history (estimated), 5 platform builds, 3 CI platforms (Linux/macOS/Windows)

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### Principle I: 100% NuGet.Client Parity
✅ **PASS** - This feature is release infrastructure, not NuGet functionality. No parity concerns.

### Principle II: Zero-Allocation Hot Paths
✅ **PASS** - No hot paths involved. Release tooling runs infrequently.

### Principle III: Context Propagation
✅ **PASS** - No I/O operations in version command implementation will use existing context patterns.

### Principle IV: Interop Testing
✅ **PASS** - Existing 550 interop tests must pass before release. No new interop tests needed for release infrastructure.

### Principle V: CLI Performance Target & Structure
✅ **PASS** - Version command follows existing CLI structure. Performance not critical for version display.

### Principle VI: Go-Idiomatic API
✅ **PASS** - Version package will use standard Go patterns (package-level variables, -ldflags injection).

### Principle VII: Thread Safety
✅ **PASS** - No shared state. Version information is read-only after build.

### Principle VIII: Complete Implementation - No Deferrals
✅ **PASS** - All requirements fully scoped:
- CHANGELOG generation: Complete shell script (not partial/deferred)
- CI/CD: Complete GitHub Actions + goreleaser setup
- Versioning: Complete -ldflags implementation
- Checklist: Complete release documentation
- SBOM explicitly moved to out-of-scope (user decision during clarification)

**GATE STATUS**: ✅ **ALL GATES PASS** - Proceed to Phase 0 research.

---

## Post-Design Constitution Re-Check

*Re-evaluated after Phase 1 design completion*

### Principle I: 100% NuGet.Client Parity
✅ **PASS** - No changes from initial check. Release infrastructure only.

### Principle II: Zero-Allocation Hot Paths
✅ **PASS** - No changes from initial check. Version display is not a hot path.

### Principle III: Context Propagation
✅ **PASS** - No changes from initial check. No I/O operations in version command.

### Principle IV: Interop Testing
✅ **PASS** - No changes from initial check. Existing tests must pass before release.

### Principle V: CLI Performance Target & Structure
✅ **PASS** - Design confirms version command follows existing Cobra structure.

### Principle VI: Go-Idiomatic API
✅ **PASS** - Design uses standard Go patterns:
- Package-level variables for version info
- -ldflags injection (standard Go practice)
- Helper function `Info()` for formatted output
- No exported types beyond package variables

### Principle VII: Thread Safety
✅ **PASS** - No shared state. All variables read-only after build.

### Principle VIII: Complete Implementation - No Deferrals
✅ **PASS** - Design artifacts confirm complete implementation:
- `research.md`: All decisions resolved (goreleaser, Keep a Changelog, conventional commits, ldflags, GitHub Actions)
- `data-model.md`: All entities defined (5 entities, no placeholders)
- `contracts/`: 3 complete contracts (version package, changelog script, goreleaser config)
- `quickstart.md`: Full implementation guide with 6 phases
- No TODOs or "future work" markers in any design artifacts

**FINAL GATE STATUS**: ✅ **ALL GATES PASS** - Ready for `/speckit.tasks`

## Project Structure

### Documentation (this feature)

```text
specs/[###-feature]/
├── plan.md              # This file (/speckit.plan command output)
├── research.md          # Phase 0 output (/speckit.plan command)
├── data-model.md        # Phase 1 output (/speckit.plan command)
├── quickstart.md        # Phase 1 output (/speckit.plan command)
├── contracts/           # Phase 1 output (/speckit.plan command)
└── tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

### Source Code (repository root)

```text
/Users/brandon/src/gonuget/
├── .github/
│   └── workflows/
│       ├── ci.yml           # CI workflow (to be updated)
│       └── release.yml      # Release workflow (new)
├── scripts/
│   └── generate-changelog.sh  # CHANGELOG generation script (new)
├── cmd/
│   └── gonuget/
│       ├── commands/
│       │   └── version.go   # Version command implementation (new)
│       └── version/
│           └── version.go   # Version package with build-time variables (new)
├── CHANGELOG.md             # Generated changelog (new)
├── .goreleaser.yml          # goreleaser configuration (new)
├── Makefile                 # Updated with release targets
└── CONTRIBUTING.md          # Versioning policy documentation (updated)
```

**Structure Decision**: Single Go project (existing gonuget repository). This feature adds:
1. GitHub Actions workflows for CI/CD
2. Shell script for CHANGELOG generation
3. Version package and command for CLI
4. goreleaser configuration for release automation
5. Documentation updates for versioning policy

All files are added to existing repository structure, no new directories required except `cmd/gonuget/version/` package.

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

**No violations** - All constitution gates pass. No complexity tracking needed.
